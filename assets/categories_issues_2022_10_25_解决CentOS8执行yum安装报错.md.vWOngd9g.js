import{_ as l}from"./chunks/ArticleMetadata.Sb1DYAHo.js";import{_ as o,D as p,o as s,c as d,I as h,w as c,k as i,a as m,R as u,b as k,e as g}from"./chunks/framework.FVQzxbLi.js";import"./chunks/md5.RtphNWHi.js";const C="/assets/202210252119166.98f4SCIq.png",N=JSON.parse(`{"title":"解决 CentOS 8 执行 yum install 报 Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist 的问题","description":"","frontmatter":{"title":"解决 CentOS 8 执行 yum install 报 Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist 的问题","author":"查尔斯","date":"2022/10/25 21:20","categories":["Bug万象集"],"tags":["Linux","CentOS"]},"headers":[],"relativePath":"categories/issues/2022/10/25/解决CentOS8执行yum安装报错.md","filePath":"categories/issues/2022/10/25/解决CentOS8执行yum安装报错.md","lastUpdated":1668325225000}`),y={name:"categories/issues/2022/10/25/解决CentOS8执行yum安装报错.md"},_=i("h1",{id:"解决-centos-8-执行-yum-install-报-error-failed-to-download-metadata-for-repo-appstream-cannot-prepare-internal-mirrorlist-no-urls-in-mirrorlist-的问题",tabindex:"-1"},[m("解决 CentOS 8 执行 yum install 报 Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist 的问题 "),i("a",{class:"header-anchor",href:"#解决-centos-8-执行-yum-install-报-error-failed-to-download-metadata-for-repo-appstream-cannot-prepare-internal-mirrorlist-no-urls-in-mirrorlist-的问题","aria-label":`Permalink to "解决 CentOS 8 执行 yum install 报 Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist 的问题"`},"​")],-1),F=u(`<h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p><strong>C：</strong> 今天，笔者在一台刚重装了 CentOS 8.2 操作系统的云服务器上正打算安装一下 Docker，结果开局安装依赖的环节就报错了。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>CentOS Linux 8 - AppStream</span></span>
<span class="line"><span>Error: Failed to download metadata for repo &#39;appstream&#39;: Cannot prepare internal mirrorlist: No URLs in mirrorlist</span></span></code></pre></div><p><img src="`+C+`" alt="202210252119166"></p><h2 id="原因分析" tabindex="-1">原因分析 <a class="header-anchor" href="#原因分析" aria-label="Permalink to &quot;原因分析&quot;">​</a></h2><p>首先排除掉是安装 Docker 引起的错误，因为笔者起初还尝试了下把三个依赖分开安装，想看看是不是由于某个依赖安装引起的，最终发现无论执行 yum 安装哪一个包都会报这个错。</p><p>而从报错信息的字面意思来看，应该是和 yum 的镜像源有关。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>错误：从仓库 ‘appstream’ 下载元数据失败：无法准备内部镜像列表：镜像列表中没有 url</span></span></code></pre></div><p>这可就触碰到笔者的盲区部分了，最不擅长的就是这类 Linux 系统的初始配置，所以笔者搜索了一下，发现了一个较为靠谱的答案。</p><blockquote><p>2020 年 12 月 8 号，CentOS 官方宣布了停止维护 CentOS Linux 的计划，并推出了 CentOS Stream 项目，CentOS Linux 8 作为 RHEL 8 的复刻版本，生命周期缩短，于 2021 年 12 月 31 日停止更新并停止维护（EOL），更多的信息可以查看 CentOS 官方公告。[1]</p></blockquote><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><p>解决起来也较为容易，那就是如果需要更新 CentOS，需要将镜像从 mirror.centos.org 更改为 vault.centos.org。</p><ol><li><p>进入 yum 的 repos 目录</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/yum.repos.d/</span></span></code></pre></div></li><li><p>替换镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s/mirrorlist/#mirrorlist/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/yum.repos.d/CentOS-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/yum.repos.d/CentOS-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div></li><li><p>生成缓存</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> makecache</span></span></code></pre></div></li><li><p>更新</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span></code></pre></div></li></ol><p>等待更新完之后，再执行 yum 安装就正常了。</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ol><li>【已解决】Error: Failed to download metadata for repo ‘appstream‘: Cannot prepare internal mirrorlist：<a href="https://blog.csdn.net/weixin_43252521/article/details/124409151" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_43252521/article/details/124409151</a></li><li>CentOS 8 EOL如何切换源？：<a href="https://help.aliyun.com/document_detail/405635.html" target="_blank" rel="noreferrer">https://help.aliyun.com/document_detail/405635.html</a></li><li>CentOS Project shifts focus to CentOS Stream：<a href="https://blog.centos.org/2020/12/future-is-centos-stream/" target="_blank" rel="noreferrer">https://blog.centos.org/2020/12/future-is-centos-stream/</a></li></ol>`,16);function b(a,f,v,S,O,D){const r=l,n=p("ClientOnly");return s(),d("div",null,[_,h(n,null,{default:c(()=>{var e,t;return[(((e=a.$frontmatter)==null?void 0:e.aside)??!0)&&(((t=a.$frontmatter)==null?void 0:t.showArticleMetadata)??!0)?(s(),k(r,{key:0,article:a.$frontmatter},null,8,["article"])):g("",!0)]}),_:1}),F])}const q=o(y,[["render",b]]);export{N as __pageData,q as default};
